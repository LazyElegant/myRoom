<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bobo.test.mapper.ActionMapper">

    <insert id="insertAction">
        insert INTO `action` VALUES
        (#{id},#{conductor},#{projectId},#{creatTime},#{rate})
    </insert>

    <select id="listAction" resultType="com.bobo.test.vo.ProjectVO">
        SELECT pro.id,
               pro.title,
               pro.content,
               u.name `submitter`,
               d.name `checkDepartment`,
               d2.name `conductDepartment`,
               pro.creat_time `creatTime`,
               pro.rate
        FROM `action` a
             LEFT JOIN project pro on a.project_id = pro.id
             LEFT JOIN `user` u ON u.id = pro.submitter_id
             LEFT JOIN department d on d.id = pro.checkDepartment
             LEFT JOIN department d2 on d2.id = pro.conductDepartment
        WHERE a.conductor = #{id}
    </select>
</mapper>