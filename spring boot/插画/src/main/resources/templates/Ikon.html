<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/common.css}" type="text/css">

	<meta charset="UTF-8">
	<title th:text="${ikon.getTitle()}"></title>
	<script type='text/javascript' th:src='@{/js/jquery-3.4.1.js}' id='jquery-core-js'></script>
	<script type='text/javascript' th:src='@{/js/common.js}'></script>
</head>
<style>

	button {
		background: #FC5A5A;
		color: #fff;
		padding: 10px 25px;
		margin-left: 20px;
		font-size: 12px;
		font-weight: 700;
		line-height: 1em;
		text-align: center;
		text-transform: uppercase;
		-webkit-transition: all .3s ease-out;
		-moz-transition: all .3s ease-out;
		transition: all .3s ease-out;
		border: 0;
		position: relative;
		overflow: hidden;
	}
	.concern{
		background: #ffffff;
		color: #17aaf3;
		border: 1px #17aaf3 solid;
	}
	.concern:hover{
		background: #17aaf3;
		color: #ffffff;
	}
	button:hover{
		background: #181616;
		color: #fff;
		cursor:pointer;
	}
	form.comment-form textarea {
		width: 100%;
		padding: 15px;
	}
	textarea {
		resize: none;
		width: auto;
		max-width: 100%;
		height: auto;
		max-height: 100%;
		background: #FAFAFA;
		border: 1px solid #eaeaea;
		margin-bottom: 20px;
		font-size: 12px;
		line-height: 1em;
		padding: 14px;
	}
	textarea:focus{
		background: #ffffff;
		border: 1px solid #afaeae;
	}
	h3{
		 font-size:20px;
	 }
	h2{
		font-size:23px;
	}
	h1{
		font-size:25px;
		margin: 0px;
	}
	.pull-left {
		float: left!important;
	}
	.styled .Utext{
		font-family: 楷体;
		font-size: 18px;
	}
	p{
		font-size: 18px;
		line-height: 30px;
	}
	#like,#collect{
		font-size:26px;
		color:#ccc;
		cursor:pointer;
		float: right;
		margin-top: 5px;
		margin-left: 10px;
	}
	.cs{color:#ffc107!important;}
	.co{color: #f00!important;}
</style>
<body class="home blog custom-background fullwidth ie-shortcodes  ie-shortcodes-responsive group-blog">
<div id="page" class="hfeed site layout-fullwidth">
	<div th:replace="~{commons/commons::hea}"></div>
	<div id="site-content" class="site-content">
		<div class="container">
			<div class="row">
				<div class="content-area posts-loop full-width-layout col-md-11" id="primary" >
					<main id="main" class="site-main row big-posts">
						<div  class="masonry-item big-item col-md-12 col-sm-12 col-xs-12">
							<article class="styled" style="width: 100%">
								<h3 style="margin: 3px; text-align: center" th:text="${ikon.getTitle()}"></h3>
							</article>
							<article class="styled" >
								<div>
									<img style="margin: 5%" width="90%" height="90%" th:src="@{${ikon.getPic()}}">
								</div>

								<div class="Utext" style="border:0 ; font-size: 23px;background-color: #ffffff;white-space:pre-wrap;word-break:break-all;" th:utext="${ikon.getContext()}"></div>
							</article>
							<article class="styled" style="width:100%" th:id="${ikon.getId()}">
								<p style="float: left"  th:id="${ikon.getAuthorId()}">作者：<span th:text="${ikon.getAuthor()}"></span>
									<button  th:if="${not #strings.isEmpty(session.user) && ikon.getAuthorId() != session.id}" th:classappend="${#strings.isEmpty(concern)} ? '' : 'concern'"  th:value="${concern}"  id="concern" th:text="${#strings.isEmpty(concern)} ? '+关注' : '已关注'"  ></button>
								</p>
								<p th:if="${not #strings.isEmpty(session.user)}" th:value="${collect}" th:classappend="${#strings.isEmpty(collect)} ? '' : 'cs'" id="collect">&#9733;</p>
								<p th:if="${not #strings.isEmpty(session.user)}" th:value="${thumb}" th:classappend="${#strings.isEmpty(thumb)} ? '' : 'co'" id="like">&#10084;</p>
							</article>
							<article th:if="${!review.isEmpty() || not #strings.isEmpty(session.user)}" class="styled">
								<ol class="comment-list" style="list-style:none;">
									<li th:each="comment:${review}" class="comment byuser comment-author-gss1 even thread-even depth-1">
										<article class="comment byuser comment-author-gss1 odd alt thread-odd thread-alt depth-1">
											<div class="comment-body">
												<div class="author vcard pull-left" style="width: 40px">
													<img th:src="@{${comment.getPic()}}" style="width: 40px;height:40px;border-radius: 50%;" width="100" height="100" class="avatar avatar-100 photo lazyloaded">
												</div>
												<div class="comment-content">
													<span class="author-name" th:text="${comment.getUserName()}"></span>
													<time class="comment-time" th:text="${comment.getReviewTime()}" ></time>
													<p th:text="${comment.getContext()}"></p>
												</div>
											</div>
										</article>
									</li>
								</ol>
								<div th:if="${not #strings.isEmpty(session.user)}" class="comment-respond">
									<h3 class="comment-reply-title">留个回复</h3>
									<form class="comment-form" th:action="@{/review}" method="post">
										<input type="text" style="display: none" name="ikonId" th:value="${ikon.getId()}">
										<textarea rows="10" name="context" aria-required="true" placeholder="输入您想表达的想法..."></textarea>
										<button style="width: 96%;" name="submit" type="submit" value="发布评论">发布评论</button>

									</form>
								</div>
							</article>

						</div>
					</main>
				</div>
			</div>
		</div>
	</div>
	<div th:replace="~{commons/commons::footer}"></div>
</div>
</body>
<script>
	$(function () {
		$("#collect").click(function () {
			$(this).toggleClass('cs');
			if ($(this).hasClass("cs")) {
				var  id = $(this).parent().attr('id');
				document.location.href = "http://localhost:8080/Ikon/collect?id=" + id;
			}else {

				var  id = $(this).parent().attr('id');
				var  value = $(this).attr('value');
				document.location.href = "http://localhost:8080/Ikon/unCollect?id=" + value + "&ikonId=" +id ;
			}
		})
		$("#like").click(function () {
			$(this).toggleClass('co');
			if ($(this).hasClass("co")) {
				var  id = $(this).parent().attr('id');
				document.location.href = "http://localhost:8080/Ikon/thumb?id=" + id;
			}else {
				var  id = $(this).parent().attr('id');
				var  value = $(this).attr('value');
				document.location.href = "http://localhost:8080/Ikon/unThumb?id=" + value + "&ikonId=" +id ;
			}
		})
		$("#concern").click(function () {
			$(this).toggleClass('concern');
			if ($(this).hasClass("concern")) {
				var  id = $(this).parent().attr('id');
				var  ikon = $(this).parent().parent().attr('id');
				document.location.href = "http://localhost:8080/Ikon/concern?id=" + id + "&ikonId=" +ikon ;
			}else {
				var  id = $(this).parent().parent().attr('id');
				var  value = $(this).attr('value');
				document.location.href = "http://localhost:8080/Ikon/unConcern?id=" + value + "&ikonId=" +id ;
			}
		})
	})
</script>

</html>
