<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>

		<meta charset="utf-8">
		<title>画作管理</title>

		<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" type="text/css">
		<link rel="stylesheet" th:href="@{/css/common.css}" type="text/css">
	<style>
		select{
			color: slategrey;
			margin-left: 20px;
			font-size: 15px;
			padding: 10px;
			width: 300px;
		}
		option{
			font-size: 15px;
		}
		h2{
			font-size:18px;
		}
		h1{
			font-size:22px;
			margin: 0px;
		}
	</style>
		<script type='text/javascript' th:src='@{/js/jquery-3.4.1.js}'></script>
		<script type='text/javascript' th:src='@{/js/common.js}'></script>
	</head>
	<body class="home blog custom-background fullwidth ie-shortcodes  ie-shortcodes-responsive group-blog">
		
		<div id="page" class="hfeed site layout-fullwidth">

				<div th:replace="~{commons/commons::hea}"></div>
			<div id="site-content" class="site-content">
				<div class="container">
					<div class="row">
						<div class="content-area posts-loop full-width-layout col-md-12" id="primary">
							<main id="main" class="site-main row big-posts">
								<div  class="masonry-item big-item col-md-12 col-sm-12 col-xs-12">

									<div class="manage" style="width: 250px;padding: 15px;float: left;">

										<header class="entry-header styled">
											<a th:href="@{/postIssue}">
												<h1>
													发布问题
												</h1>
											</a>
										</header>
										<header class="entry-header styled">
											<a th:href="@{/issueManage}">
												<h1>
													问题管理
												</h1>
											</a>
										</header>

									</div>
									<div id="post-2202" style="width: 800px;float: left;padding: 15px;">
										<div class="styled">
											<h2>已发布</h2>
											<hr />
											<article class="styled"  th:each="issue:${issues}">
												<div class="entry-content">
													<div class="post-heading">
														<h3 class="entry-title"><a th:href="@{/issue(id=${issue.getId()})}" rel="bookmark" th:text="${issue.getTitle()}" ></a></h3>
														<ul class="post-meta entry-meta">
															<li th:text="'发表时间:'+ ${issue.getIssueTime()}" ></li>
															<li th:if="${session.user.getStatus() != 0}" th:id="${issue.getId()}"><a href="#" class="modify">修改</a></li>
															<li th:id="${issue.getId()}"><a href="#" class="delete">删除</a></li>
														</ul>
													</div>
													<div class="post-excerpt">
														<p class="note" th:text="${#strings.abbreviate(issue.getContext(),100)}"></p>
													</div>
												</div>
											</article>
										</div>
									</div>
								</div>
							</main>
						</div>
					</div>
				</div>
			</div>
			<div th:replace="~{commons/commons::footer}"></div>
			
		</div>
	</body>
	<script>
		$(".modify").click(function () {
			var  id = $(this).parent().attr('id');
			document.location.href =  "http://localhost:8080/toModifyIssue?id=" + id;
		})
		$(".delete").click(function () {
			if(confirm("是否删除该问题?")){
				var  id = $(this).parent().attr('id');
				document.location.href =  "http://localhost:8080/deleteIssue?id=" + id;
			}
		})
	</script>
</html>